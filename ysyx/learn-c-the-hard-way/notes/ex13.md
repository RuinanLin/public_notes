# 练习13：Switch语句　习题解答

## 整理人：林睿楠

* 编写另一个程序，在字母上做算数运算将它们转换为小写，并且在`switch`中移除所有额外的大写字母．

	改动如下：

	```
	13a14,17
	> 		if (letter >= 'A' && letter <= 'Z') {
	> 			letter += 'a' - 'A';
	> 		}
	> 
	16d19
	< 			case 'A':
	21d23
	< 			case 'E':
	26d27
	< 			case 'I':
	31d31
	< 			case 'O':
	36d35
	< 			case 'U':
	41d39
	< 			case 'Y':
	```

	改动说明：就是在每一个大写字母上加一个偏移．<br><br>

* 使用`','`（逗号）在`for`循环中初始化`letter`．

	改动如下：

	```
	11,13c11,12
	< 	for (i = 0; argv[1][i] != '\0'; i++) {
	< 		char letter = argv[1][i];
	< 
	---
	> 	char letter = argv[1][0];
	> 	for (i = 0, letter = argv[1][0]; argv[1][i] != '\0'; i++, letter = argv[1][i]) {
	```

	就是初始化和增量的时候带上`letter`的更新．<br><br>

* 使用另一个`for`循环来让它处理你传入的所有命令行参数．

	改动如下：

	```
	4,5c4,5
	< 	if (argc != 2) {
	< 		printf("ERROR: You need one argument.\n");
	---
	> 	if (argc < 2) {
	> 		printf("ERROR: You need at least one argument.\n");
	10,49c10,54
	< 	int i = 0;
	< 	for (i = 0; argv[1][i] != '\0'; i++) {
	< 		char letter = argv[1][i];
	< 
	< 		switch (letter) {
	< 			case 'a':
	< 			case 'A':
	< 				printf("%d: 'A'\n", i);
	< 				break;
	< 
	< 			case 'e':
	< 			case 'E':
	< 				printf("%d: 'E'\n", i);
	< 				break;
	< 
	< 			case 'i':
	< 			case 'I':
	< 				printf("%d: 'I'\n", i);
	< 				break;
	< 
	< 			case 'o':
	< 			case 'O':
	< 				printf("%d: 'O'\n", i);
	< 				break;
	< 
	< 			case 'u':
	< 			case 'U':
	< 				printf("%d: 'U'\n", i);
	< 				break;
	< 
	< 			case 'y':
	< 			case 'Y':
	< 				if (i > 2) {
	< 					// it's only sometimes Y
	< 					printf("%d: 'Y'\n", i);
	< 				}
	< 				break;
	< 
	< 			default:
	< 				printf("%d: %c is not a vowel\n", i, letter);
	---
	> 	int i = 0, j = 0;
	> 	for (j = 1; j < argc; j++) {
	> 		printf("====================\n");
	> 		printf("Start to process argv[%d]\n", j);
	> 
	> 		for (i = 0; argv[j][i] != '\0'; i++) {
	> 			char letter = argv[j][i];
	> 
	> 			switch (letter) {
	> 				case 'a':
	> 				case 'A':
	> 					printf("%d: 'A'\n", i);
	> 					break;
	> 
	> 				case 'e':
	> 				case 'E':
	> 					printf("%d: 'E'\n", i);
	> 					break;
	> 
	> 				case 'i':
	> 				case 'I':
	> 					printf("%d: 'I'\n", i);
	> 					break;
	> 
	> 				case 'o':
	> 				case 'O':
	> 					printf("%d: 'O'\n", i);
	> 					break;
	> 
	> 				case 'u':
	> 				case 'U':
	> 					printf("%d: 'U'\n", i);
	> 					break;
	> 
	> 				case 'y':
	> 				case 'Y':
	> 					if (i > 2) {
	> 						// it's only sometimes Y
	> 						printf("%d: 'Y'\n", i);
	> 					}
	> 					break;
	> 
	> 				default:
	> 					printf("%d: %c is not a vowel\n", i, letter);
	> 			}
	```

	改动说明：首先改动`argc`的检查，之后就是在外面再套一层循环．

	以`./build/ex13-3 Zed Shaw`为输入，运行得到的结果是：

	```
	====================
	Start to process argv[1]
	0: Z is not a vowel
	1: 'E'
	2: d is not a vowel
	====================
	Start to process argv[2]
	0: S is not a vowel
	1: h is not a vowel
	2: 'A'
	3: w is not a vowel
	```

	代码运行符合预期．<br><br>

* 将这个`switch`语句转为`if`语句，你更喜欢哪个呢？

	`switch`语句．改就不改了，太烦了．<br><br>

* 在"Y"的例子中，我在`if`代码块外面写了个`break`．这样会产生什么效果？如果把它移进`if`代码块，会发生什么？自己试着解答它，并证明你是正确的．

	在`if`外写`break`的效果是：当遇到`'y'`或者`'Y'`，无论如何都不会到`default`输出判断说它不是元音．也就是说当`i`为0~2遇到`y`或`Y`时，它什么都不会输出．

	如果移进`if`代码块，那么，当遇到出现在0~2号位的`'y'`或`'Y'`时，会进入`default`，提示它不是一个元音．

	按照题目指示，基于`ex13.c`，修改代码如下：

	```
	44a45
	> 					break;
	46d46
	< 				break;
	```

	在未进行修改的`ex13.c`中，运行`./ex13 yYyYyY`，得到的结果是：

	```
	3: 'Y'
	4: 'Y'
	5: 'Y'
	```

	而运行修改过的`ex13-5.c`，运行`./ex13-5 yYyYyY`，得到的结果是：

	```
	0: y is not a vowel
	1: Y is not a vowel
	2: y is not a vowel
	3: 'Y'
	4: 'Y'
	5: 'Y'
	```
